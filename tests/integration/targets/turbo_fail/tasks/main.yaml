- name: fail with no additionnal args
  cloud.common.turbo_fail:
  register: result
  failed_when: not result.failed

- assert:
    that:
      - result.msg == 'ansible.cloud.fail'
      - not result.changed

- name: fail with additionnal args
  cloud.common.turbo_fail:
    params:
      test:
        phase: integration
        release: 1.0
      environment: production
  register: result
  failed_when: not result.failed

- assert:
    that:
      - result.environment == "production"
      - result.test.phase == "integration"
      - result.test.release == 1.0
